# TOT ML Enterprise Makefile

.PHONY: help setup install-backend install-frontend dev-backend dev-frontend dev docker-build docker-up docker-down clean test

help:
	@echo "TOT ML Enterprise - Available Commands"
	@echo ""
	@echo "  make setup           - Initial setup (install dependencies)"
	@echo "  make dev             - Start development servers"
	@echo "  make docker-build    - Build Docker images"
	@echo "  make docker-up       - Start Docker containers"
	@echo "  make docker-down     - Stop Docker containers"
	@echo "  make clean           - Clean build artifacts"
	@echo "  make test            - Run tests"

setup:
	@echo "ğŸš€ Setting up TOT ML Enterprise..."
	@bash scripts/setup.sh

install-backend:
	@echo "ğŸ”§ Installing backend dependencies..."
	pip install -e .
	pip install -r backend/requirements.txt

install-frontend:
	@echo "ğŸ¨ Installing frontend dependencies..."
	cd frontend && npm install

dev-backend:
	@echo "ğŸ”§ Starting backend server..."
	cd backend && uvicorn main:app --reload --host 0.0.0.0 --port 8000

dev-frontend:
	@echo "ğŸ¨ Starting frontend development server..."
	cd frontend && npm run dev

dev:
	@echo "ğŸš€ Starting development servers..."
	@bash scripts/start.sh

docker-build:
	@echo "ğŸ³ Building Docker images..."
	docker-compose build

docker-up:
	@echo "ğŸ³ Starting Docker containers..."
	docker-compose up -d
	@echo "âœ… Application started at http://localhost:3000"

docker-down:
	@echo "ğŸ³ Stopping Docker containers..."
	docker-compose down

docker-logs:
	@echo "ğŸ“‹ Showing Docker logs..."
	docker-compose logs -f

clean:
	@echo "ğŸ§¹ Cleaning build artifacts..."
	rm -rf frontend/dist
	rm -rf frontend/node_modules
	rm -rf **/__pycache__
	rm -rf **/*.pyc
	rm -rf .pytest_cache
	find . -type d -name "__pycache__" -exec rm -rf {} +

test:
	@echo "ğŸ§ª Running tests..."
	pytest

build-frontend:
	@echo "ğŸ—ï¸  Building frontend for production..."
	cd frontend && npm run build

lint:
	@echo "ğŸ” Running linters..."
	cd frontend && npm run lint

.DEFAULT_GOAL := help
